# ğŸ‘·ğŸ» **AWS CDK (Cloud Development Kit)**

> AWS CDK (Cloud Development Kit) is a **modern Infrastructure-as-Code (IaC)** framework that allows you to define AWS infrastructure using **real programming languages** instead of static YAML or JSON.

---

<div style="text-align: center;">
    <img src="images/aws-cdk.png" style="border-radius: 10px; width: 90%;" alt="AWS CDK">
</div>

---

## ğŸ’¡ At a Glance

| Feature               | Description                                                 |
| --------------------- | ----------------------------------------------------------- |
| ğŸ’¬ **Languages**      | TypeScript, Python, Java, C#, F#                            |
| ğŸ§± **Constructs**     | Reusable code components that model cloud resources         |
| âš™ï¸ **Compiled to**    | CloudFormation templates (JSON/YAML)                        |
| ğŸ“¦ **Great for**      | Lambda functions, APIs, ECS, EKS, event-driven applications |
| ğŸ” **CI/CD friendly** | Can be versioned, tested, and integrated into pipelines     |

---

<div style="text-align: center;">
    <img src="images/aws-cdk-code.png" alt="aws-cdk-code" style="border-radius: 10px; width: 60%;">
</div>

---

## ğŸ¯ **Why Use AWS CDK Over Raw CloudFormation?**

- âœ… Define your infrastructure using **real code** (variables, loops, logic)
- âœ… Fewer lines vs. verbose YAML
- âœ… Native **IDE support**, type checking, and auto-complete
- âœ… Modular & reusable with **constructs**
- âœ… Integrated with **npm**, **pip**, or **Maven** ecosystems
- âœ… Auto-synthesizes to CloudFormation behind the scenes

---

## ğŸ› ï¸ **Step 1: Install & Set Up CDK**

### ğŸ”§ Prerequisites

- AWS CLI (configured)
- Node.js 14+
- npm (comes with Node.js)
- TypeScript (optional but recommended)

### ğŸ“¥ Install CDK CLI

```bash
npm install -g aws-cdk
cdk --version
```

---

## ğŸ“¦ **Step 2: Create a CDK Project**

### ğŸ“ Init a New Project

```bash
mkdir my-cdk-app && cd my-cdk-app
cdk init app --language typescript
```

ğŸ”€ Use `--language python`, `java`, or `csharp` for other languages.

---

## ğŸ§± **Step 3: Understand the Project Structure**

```bash
my-cdk-app/
â”‚
â”œâ”€â”€ bin/                  # Entry point of the app
â”œâ”€â”€ lib/                  # Define stacks and constructs here
â”œâ”€â”€ cdk.json              # CDK configuration
â”œâ”€â”€ package.json          # Node dependencies
â”œâ”€â”€ tsconfig.json         # TypeScript config
```

---

## ğŸŒ **Step 4: Define AWS Resources Using Constructs**

CDK uses **constructs** (classes) to model cloud resources.

### ğŸ§° Example: Create an S3 Bucket

Edit `lib/my-cdk-app-stack.ts`:

```ts
import * as cdk from "aws-cdk-lib";
import * as s3 from "aws-cdk-lib/aws-s3";

export class MyCdkAppStack extends cdk.Stack {
  constructor(scope: cdk.App, id: string, props?: cdk.StackProps) {
    super(scope, id, props);

    new s3.Bucket(this, "MyBucket", {
      versioned: true,
      removalPolicy: cdk.RemovalPolicy.DESTROY,
    });
  }
}
```

---

## ğŸš€ **Step 5: Deploy Your Stack**

### ğŸ” 1. **Synthesize CloudFormation Template**

```bash
cdk synth
```

ğŸ§¾ This creates the raw CloudFormation JSON from your code.

### â¬†ï¸ 2. **Deploy to AWS**

```bash
cdk deploy
```

ğŸ‰ Your stack (with the S3 bucket) is now deployed!

---

## ğŸ§¹ **Step 6: Stack Management**

| Command       | Description                             |
| ------------- | --------------------------------------- |
| `cdk list`    | List all stacks                         |
| `cdk diff`    | Compare local code vs deployed stack    |
| `cdk destroy` | Remove deployed resources               |
| `cdk watch`   | Auto-deploy on code change (hot reload) |

---

## ğŸ§ª **Step 7: Add More Resources â€“ Lambda Example**

### ğŸ“‚ Create a Lambda Function

`lambda/index.js`:

```js
exports.handler = async (event) => {
  return { statusCode: 200, body: "Hello from Lambda!" };
};
```

### ğŸ“ Add to Your Stack

```ts
import * as lambda from "aws-cdk-lib/aws-lambda";

new lambda.Function(this, "HelloLambda", {
  runtime: lambda.Runtime.NODEJS_14_X,
  handler: "index.handler",
  code: lambda.Code.fromAsset("lambda"),
});
```

---

## ğŸ§¼ **Best Practices**

âœ… **Organize into Constructs** (modular, reusable classes)
âœ… Use **Environment-aware Stacks** for multi-region/account
âœ… Store secrets in **AWS Secrets Manager**
âœ… Use **context parameters** & `cdk.json` for config
âœ… Run `cdk diff` before deployment to preview changes
âœ… Use **Git** for versioning your infrastructure code

---

## ğŸ’¡ CDK Behind the Scenes

| Layer          | What's Happening                            |
| -------------- | ------------------------------------------- |
| Your Code      | You define resources using JS, Python, etc. |
| CDK CLI        | Synthesizes â†’ CloudFormation template       |
| CloudFormation | Deploys infrastructure to AWS               |

ğŸ“¦ You get the power of CloudFormation **without writing raw YAML**.

---

## ğŸ”¥ Bonus: Reusable Constructs

You can create your own reusable **constructs** (like React components):

```ts
export class MyQueueConstruct extends Construct {
  constructor(scope: Construct, id: string) {
    super(scope, id);

    new sqs.Queue(this, "MyQueue", {
      visibilityTimeout: Duration.seconds(30),
    });
  }
}
```

Then import and use in any stack:

```ts
new MyQueueConstruct(this, "CustomQueue");
```

---

## âœ… Summary

| Concept              | What You Did                                   |
| -------------------- | ---------------------------------------------- |
| âœ… CDK Init          | Bootstrapped your app with TypeScript          |
| âœ… Defined Resources | Created S3 and Lambda using real code          |
| âœ… Synth/Deploy      | Translated code to CloudFormation and deployed |
| âœ… Stack Management  | Listed, destroyed, and monitored changes       |
