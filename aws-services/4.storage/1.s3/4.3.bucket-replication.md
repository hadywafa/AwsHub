# ğŸ”„ **Amazon S3 Bucket Replication**

Amazon S3 **Bucket Replication** is an **asynchronous, version-aware feature** that automatically copies objects from a source bucket to one or more destination buckets â€” **across regions, accounts, or within the same region** â€” to improve durability, availability, and compliance.

> ğŸ’¡ Must enable Versioning in source and destination buckets

---

<div align="center" style="padding: 0 0">
  <img src="images/srr-crr.png" alt="S3 Bucket Replication" style="border-radius: 10px;">
</div>

---

## ğŸŒ **Replication Types**

| Type    | Full Name                | Purpose                         | Example Use Case                  |
| ------- | ------------------------ | ------------------------------- | --------------------------------- |
| **SRR** | Same-Region Replication  | Data residency, log aggregation | Aggregate app logs in same region |
| **CRR** | Cross-Region Replication | Disaster recovery, compliance   | DR copy in another AWS region     |

> ğŸ” **Both SRR and CRR require versioning** enabled on both source and destination buckets.

---

## ğŸ§© **Core Concepts & Exam Must-Knows**

| Feature                         | Exam & Work Relevance                               |
| ------------------------------- | --------------------------------------------------- |
| âœ… **Asynchronous**             | Copies happen in background â€” latency possible      |
| ğŸ” **One-Way Only**             | No bidirectional sync or chaining (B1 â†’ B2 â†’ B3 âŒ) |
| ğŸ‘¥ **Cross-Account Support**    | Great for multi-account backup strategy             |
| ğŸ¯ **Prefix/Tag Filters**       | Selective replication = cost optimization           |
| ğŸ”’ **IAM Role Required**        | Replication permissions must be explicitly granted  |
| âš ï¸ **Deletes Not Fully Synced** | Delete with version ID is _not_ replicated          |

---

## ğŸ§± **Replication Requirements**

| Setting                  | Requirement                                                 |
| ------------------------ | ----------------------------------------------------------- |
| âœ… **Versioning**        | Must be enabled on both buckets                             |
| ğŸ›  **IAM Role**           | Must allow `s3:GetObject`, `s3:Replicate*`                  |
| ğŸ” **Encryption**        | SSE-S3 and SSE-KMS supported (SSE-C âŒ)                     |
| ğŸ“¥ **Only New Objects**  | Replication applies to objects created **after** rule setup |
| â± **RTC SLA (Optional)** | Guarantees 99.99% of objects within **15 minutes**          |

---

## ğŸš€ **Advanced Capabilities (For Work & Cost Optimization)**

### 1ï¸âƒ£ **Batch Replication (Manually Triggered)**

- Replicate existing objects (created before replication was enabled).
- Also useful for retrying previously failed replications.

### 2ï¸âƒ£ **Multiple Destinations**

- Create multiple replication rules targeting different buckets.
- Can be in different regions/accounts.

### 3ï¸âƒ£ **Replication Metrics**

- Enable **CloudWatch metrics** to track:

  - Bytes replicated
  - Replication latency
  - Number of failures

---

## ğŸ”’ **Handling Encryption in Replication**

| Encryption Type | Supported? | Notes                                                  |
| --------------- | ---------- | ------------------------------------------------------ |
| SSE-S3          | âœ… Yes     | Default encryption supported                           |
| SSE-KMS         | âœ… Yes     | Requires KMS permissions in **source and destination** |
| SSE-C           | âŒ No      | Not supported for replication                          |

ğŸ“Œ If the destination bucket has **default encryption**, unencrypted objects will be encrypted automatically on arrival.

---

## â±ï¸ **Replication Time Control (RTC)**

**RTC** guarantees that 99.99% of new objects are replicated within **15 minutes**.

| RTC Benefit           | Details                                           |
| --------------------- | ------------------------------------------------- |
| â±ï¸ Low Latency        | Near real-time replication                        |
| ğŸ§¾ SLA Backed         | Ensures compliance with **RTO** and business SLAs |
| ğŸ“Š Monitoring Support | Integrated with metrics and dashboards            |

---

## ğŸ“‚ **Common Use Cases**

### ğŸ” **Same-Region Replication (SRR)**

- ğŸ” **Log Aggregation**: Collect logs from different buckets into one.
- ğŸ”„ **Environment Sync**: Keep production and test environments consistent.
- ğŸ›¡ **Data Residency**: Ensure data remains in one region for compliance.

### ğŸŒ **Cross-Region Replication (CRR)**

- ğŸ§‘â€âš–ï¸ **Regulatory Compliance**: Meet disaster recovery and regional policies.
- ğŸŒ **Global Latency Optimization**: Replicate closer to users or apps.
- ğŸ“Š **Distributed Processing**: Enable parallel regional compute pipelines.

---

## âœ… **Best Practices for Bucket Replication**

### ğŸ§  Setup & Security

- âœ… **Enable versioning** in both buckets.
- âœ… Use IAM roles with **least privilege** permissions.

### ğŸ¯ Efficiency

- âœ… Use **prefix or tag-based rules** to replicate only needed data.
- âœ… Clean up incomplete replications using **Lifecycle Policies**.

### ğŸ” Monitoring

- âœ… Enable **CloudWatch replication metrics**.
- âœ… Set up alerts for replication delays or failures.

### ğŸ”„ Encryption & Testing

- âœ… Match or configure destination encryption settings.
- âœ… Periodically **test replication flows**.

---

## ğŸš¨ **Replication Notes**

- ğŸ“Œ Must enable Versioning in source and destination buckets
- ğŸ“Œ After you enable Replication, only new objects are replicated
- ğŸ“Œ Optionally, you can replicate existing objects using S3 Batch Replication
  - Replicates existing objects and objects that failed replication
- ğŸ“Œ For DELETE operations
  - Can replicate delete markers from source to target (optional setting)
  - Deletions with a version ID are not replicated (to avoid malicious deletes)
- ğŸ“Œ There is no â€œchainingâ€ of replication
  - If bucket 1 has replication into bucket 2, which has replication into bucket 3
  - Then objects created in bucket 1 are not replicated to bucket 3
