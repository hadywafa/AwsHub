# ğŸ”” **Amazon S3 Event Notifications with EventBridge**

**Amazon S3** natively integrates with **Amazon EventBridge**, allowing you to capture detailed object-level events and route them to a variety of AWS services â€” **with rich filtering, reliable delivery, and replay support**.

> ğŸ¯ _Perfect for building event-driven, serverless architectures beyond the limitations of SNS, SQS, or Lambda triggers._

---

<div align="center">
  <img src="images/s3-eventbridge-integration.png" alt="S3 to EventBridge" style="background-color: white; border-radius: 10px; width: 60%;" />
</div>

---

## ğŸ“¦ **What Is S3 + EventBridge Integration?**

With this integration:

- **S3 emits object-level events** (e.g., uploads, deletions).
- **EventBridge captures these events** as part of the **AWS default event bus**.
- You can **filter**, **route**, **store**, **replay**, or **transform** events â€” and send them to **multiple targets**.

---

## ğŸ” **Why Use EventBridge Instead of S3 Native Notifications?**

| Feature                      | âœ… S3 with EventBridge                          |
| ---------------------------- | ----------------------------------------------- |
| ğŸ”„ Supports Multiple Targets | âœ”ï¸ (Step Functions, Kinesis, Lambda, Firehoseâ€¦) |
| ğŸ” Advanced Filtering        | âœ”ï¸ (JSON rules on metadata, object name, sizeâ€¦) |
| ğŸ“ No per-bucket limit       | âœ”ï¸ Use same bucket in multiple rules            |
| ğŸ’¾ Archive & Replay          | âœ”ï¸ Archive events and replay anytime            |
| ğŸ“Š Event Observability       | âœ”ï¸ Monitor using EventBridge metrics/logs       |
| ğŸ” Fan-out Support           | âœ”ï¸ Route one event to multiple targets          |

> ğŸ§  EventBridge is ideal for **decoupled**, **scalable**, and **audit-friendly** architectures.

---

## âš™ï¸ **How It Works**

<div align="center">

```mermaid
flowchart TD
    Upload[User Uploads Object to S3]
    Upload --> S3[S3 Emits Event]
    S3 --> EventBridge[Amazon EventBridge]
    EventBridge -->|Filters Match| Lambda[âš™ï¸ Lambda Function]
    EventBridge -->|Or| Step[ğŸ“œ Step Functions]
    EventBridge -->|Or| Firehose[ğŸ”¥ Kinesis Firehose]
    EventBridge -->|Or| Archive[ğŸ—ƒï¸ Archive / Replay]
```

</div>

---

## ğŸ§© **Supported Event Types from S3**

- `ObjectCreated:*`
- `ObjectRemoved:*`
- `ObjectRestore:*`
- `Replication:*`
- `LifecycleExpiration:*`
  â€¦and more.

---

## ğŸ§ª **Example Rule â€“ Filter by Object Size & Prefix**

```json
{
  "source": ["aws.s3"],
  "detail-type": ["Object Created"],
  "detail": {
    "bucket": {
      "name": ["my-uploads"]
    },
    "object": {
      "key": [{ "prefix": "images/" }],
      "size": [{ "numeric": [">", 1000000] }]
    }
  }
}
```

> âœ… Triggers only for files larger than 1 MB under the `images/` prefix.

---

## ğŸš€ **Destinations You Can Trigger via EventBridge**

| Destination             | Use Case Example                               |
| ----------------------- | ---------------------------------------------- |
| âš™ï¸ **Lambda**           | Run validation, processing, or notifications   |
| ğŸ“œ **Step Functions**   | Orchestrate workflows for AI processing, ETL   |
| ğŸ”¥ **Kinesis Firehose** | Stream files to S3, Redshift, or Elasticsearch |
| ğŸ’¬ **SNS / SQS**        | Legacy integration for async message handling  |
| ğŸ—ƒï¸ **Event Archive**    | Store and replay missed or historical events   |

---

## ğŸ›¡ï¸ **Security and Permissions**

- S3 uses the **`s3.amazonaws.com`** service principal to emit events.
- You donâ€™t need to configure S3 bucket permissions for EventBridge to receive events â€” but **the EventBridge rule target must allow invocation** via IAM.

Example IAM permission for Lambda target:

```json
{
  "Effect": "Allow",
  "Principal": {
    "Service": "events.amazonaws.com"
  },
  "Action": "lambda:InvokeFunction",
  "Resource": "arn:aws:lambda:region:account-id:function:your-function"
}
```

---

## ğŸ“ˆ **Benefits of Using EventBridge with S3**

| Feature              | âœ… Benefit                                                  |
| -------------------- | ----------------------------------------------------------- |
| ğŸ” JSON filtering    | Filter based on **object metadata**, not just suffix/prefix |
| ğŸ” Multiple targets  | Send one event to **many destinations** simultaneously      |
| ğŸ”„ Event replay      | Reprocess events **on demand** (for debugging or recovery)  |
| ğŸ“¦ No polling        | Fully event-driven; no need for cron or scans               |
| ğŸ§© Complex workflows | Trigger **Step Functions**, stream to **Firehose**, etc.    |

---

## âœ… **Final Thought**

Using **Amazon S3 + EventBridge** unlocks a **modern event-driven architecture** where your applications respond to S3 events with **flexibility, reliability, and power**.

> Perfect for workflows that need **fan-out**, **filtering**, **auditing**, or **complex orchestration** â€” all **without writing polling logic or managing retries**.
