# âš”ï¸ **CloudTrail + EventBridge vs AWS Config**

> ğŸ’¡ Both can track changes in your AWS environment, but they are designed for **different purposes**.

---

## âš™ï¸ Architecture Diagram

<div align="center">

```mermaid
---
config:
  layout: elk
  elk:
    mergeEdges: false
    <!-- nodePlacementStrategy: LINEAR_SEGMENTS -->
---
flowchart TD
  A[User/API Call] -->|PutBucketAcl| B[CloudTrail]
  B --> C[EventBridge]
  C -->|Match Rule| D[Lambda - Remove Public ACL]
  B -->|Log to S3| S3Bucket

  A -->|Changes Config| E[S3 Bucket Config]
  E --> F[AWS Config]
  F -->|Detects Violation| G[Config Rule]
  G -->|Auto Remediation| D
```

</div>

---

## ğŸ§  TL;DR

| Feature                  | **CloudTrail + EventBridge**                                    | **AWS Config**                                              |
| ------------------------ | --------------------------------------------------------------- | ----------------------------------------------------------- |
| ğŸ” **What It Tracks**    | **Who did what?** â†’ API calls (e.g., `CreateUser`, `PutObject`) | **What changed?** â†’ Resource configuration history (state)  |
| ğŸ•µï¸ **Focus**             | Activity & auditing (security, API calls, user actions)         | Compliance & configuration state tracking                   |
| ğŸ” **Integration Style** | Event-driven automation (via **EventBridge**)                   | Continuous config monitoring + rules                        |
| â±ï¸ **Timeliness**        | Near real-time (with EventBridge rules)                         | Delayed (minutes), but complete snapshot of the state       |
| ğŸ› ï¸ **Automation**        | Triggers **Lambda**, **SNS**, **SQS**, **Step Functions**, etc. | Can auto-remediate via **AWS Config Rules** + custom Lambda |
| ğŸ“œ **Retention**         | 90 days (by default) or long-term in S3                         | Full historical config snapshots + compliance history       |
| ğŸ’¬ **Event Detail Type** | Event metadata + parameters of the API call                     | Full **before/after** of the resource config (JSON diff)    |

---

## ğŸ’¡ Example Use Case Comparisons

### âœ… **Use CloudTrail + EventBridge** _When:_

| Scenario                                                  | Why it's best                                                            |
| --------------------------------------------------------- | ------------------------------------------------------------------------ |
| Someone attaches an admin IAM policy to a user            | You want to **detect that API call immediately** and trigger remediation |
| A developer deletes an RDS DB instance                    | You want to know **who did it**, **from where**, and **what time**       |
| You want to trigger a CI/CD pipeline on `PutObject` to S3 | S3 doesn't natively emit to EventBridge, but **CloudTrail does**         |

> ğŸ§  You care about **who did what**, **when**, **how**, and **take action fast**.

---

### âœ… **Use AWS Config** _When:_

| Scenario                                                                   | Why it's best                                              |
| -------------------------------------------------------------------------- | ---------------------------------------------------------- |
| A resourceâ€™s config changed (e.g., public S3 bucket)                       | You want to track the **config diff over time** and fix it |
| You need to **enforce compliance** (e.g., all EC2s must use specific AMIs) | AWS Config can evaluate resources **continuously**         |
| You want to audit historical settings                                      | AWS Config stores snapshots of all previous config states  |

> ğŸ§  You care about **state**, **compliance**, and **audit over time** â€” not just who changed it.

---

## ğŸ” Example: Someone Adds a Public S3 Bucket

| With CloudTrail + EventBridge             | With AWS Config                                         |
| ----------------------------------------- | ------------------------------------------------------- |
| ğŸ”” Detects that `PutBucketAcl` was called | ğŸ” Detects that S3 bucket is now public                 |
| ğŸ§  Know **who** did it                    | ğŸ“œ Know **what the full configuration** looks like      |
| ğŸš€ Can trigger a **Lambda function**      | âœ… Can enforce an **AWS Config rule** to auto-remediate |

---

## âœ… Final Advice

| If your focus is...                            | Use...                   |
| ---------------------------------------------- | ------------------------ |
| Near-real-time detection + automation          | CloudTrail + EventBridge |
| Audit trail for compliance (NIST, HIPAA, etc.) | AWS Config               |
| Both (state + action + compliance)             | Use them **together**!   |

> ğŸ§  **Smart setups combine both**:
> Use **CloudTrail + EventBridge** for instant action, and **AWS Config** for long-term visibility & compliance.
