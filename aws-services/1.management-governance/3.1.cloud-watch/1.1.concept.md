# 📡 **AWS Monitoring Concepts – Mastering CloudWatch & Beyond**

Monitoring is essential to ensure your AWS applications are **healthy, performant, and cost-efficient**. AWS provides powerful tools like **Amazon CloudWatch** for collecting **metrics**, **logs**, setting up **alarms**, building **dashboards**, and even detecting anomalies with **AI**.

---

## 1. 📊 **Metrics**

> Metric is a variable to monitor (e,g, CPUUtilization, NetworkIn…)

---

### 1.1 🔄 **Metric Resolution**

Metric resolution defines how frequently data points are collected for a metric.

| Resolution Type     | Granularity    | Use Case                     |
| ------------------- | -------------- | ---------------------------- |
| **Standard**        | Every 1 minute | General monitoring           |
| **High Resolution** | Every 1 second | Real-time apps, quick spikes |

> ⚠️ High-resolution metrics incur **extra cost**, but offer **more detailed visibility**.

### 1.2 📅 **Retention Period**

CloudWatch stores metric data for different durations based on the resolution:

| Data Resolution | Retention Time       |
| --------------- | -------------------- |
| 1 second        | 3 hours              |
| 1 minute        | 15 days              |
| 5 minutes       | 63 days (\~2 months) |
| 1 hour          | 15 months (455 days) |

> 💡 As data ages, it is **aggregated** and stored at a lower resolution to save on storage costs while preserving important historical data.

### 1.3 📉 **Aggregation**

As metric data ages, it is aggregated into larger intervals. This means that data points collected at high resolution (e.g., 1-second intervals) will be summarized into lower-resolution intervals (e.g., 1-minute or 1-hour intervals). This helps manage storage efficiently while maintaining useful historical data.

### 1.4 📈 **Statistic**

CloudWatch metrics are **aggregated** using statistical operations:

- `Minimum`
- `Maximum`
- `Sum`
- `Average`
- `SampleCount`

> 💡 These help summarize data across time windows (e.g., 5-minute average CPU usage).

### 1.5 💯 **Percentile**

Percentiles help in understanding how a particular metric is distributed. Common percentiles include:

- **p95**: The 95th percentile value (e.g., response time where 95% of requests are faster).
- **p99**: The 99th percentile value, representing the top 1% of data points.

> 💡 Percentiles are useful for performance monitoring and setting service level objectives (SLOs).

### 1.6 📏 **Units of Measure**

Metrics use specific units depending on the resource:

- **Seconds** (latency, duration)
- **Bytes** (memory, data transfer)
- **Percent** (CPU, utilization)
- **Count** (invocations, requests)

---

## 2. 📝 **Logs**

> Logs are text-based records generated by applications, AWS services, or infrastructure components.
> These logs help monitor, troubleshoot, and analyze system behavior.

---

### 2.1 ⚡ **Log Event**

Individual log entries containing a timestamp and message.

### 2.2 🚿 **Log Stream**

A **log stream** is a sequence of log events from the same source. For instance, each EC2 instance or Lambda function can have its own log stream.

- **Example**: For an application with three EC2 instances, you would have three log streams under a common **log group**:

  - **Log Group: ApplicationLogs**
    - **Log Stream: EC2_Instance_1**
    - **Log Stream: EC2_Instance_2**
    - **Log Stream: EC2_Instance_3**

Each stream contains log events generated by the respective EC2 instance.

### 2.3 👜 **Log Groups**

A collection of log streams related to a specific application or service.

#### ⏳ **Log Retention**

You choose how long to keep logs:

- Options range: **1 day to 10 years**
- 🔄 **Auto-delete** after retention period expires
- 📌 Useful for compliance and cost control

### 2.3 🔍 **Log Insights**

**CloudWatch Logs Insights** allows you to **interactively** search, analyze, and visualize your logs.using a **SQL-like syntax**.

✅ Helps you:

- Filter logs by error code
- Count failed requests
- Visualize trends over time

---

### 2.4 🛠️ **Log Metric Filters**

Turn logs into **custom CloudWatch metrics** by matching patterns.

- **Example**: Set a filter to track HTTP 500 errors from your logs and create a custom CloudWatch metric based on the number of occurrences.

📌 Example:

```bash
Filter: ERROR
Metric: errorCount
```

🔔 You can then **create alarms** on this metric!

---

## 3. ⏰ Alarms – Take Action When Things Go Wrong

CloudWatch Alarms let you **automatically react** to metric changes.

---

### 3.1 🛠️ Alarm Types

| Type                | Description                                        |
| ------------------- | -------------------------------------------------- |
| **Standard Alarm**  | Triggers on a single metric                        |
| **Composite Alarm** | Combines multiple alarms into one (logical AND/OR) |

---

### 3.2 📶 Alarm States

- ✅ **OK**: Everything’s fine
- 🚨 **ALARM**: Threshold breached
- ❓ **INSUFFICIENT_DATA**: No recent data

---

### 3.3 🔧 Alarm Actions

Common actions triggered on alarms:

- **SNS Notification** (email, SMS)
- **EC2 Recovery** (automated restart)
- **Auto Scaling** (scale up/down based on metrics)

---

## 📊 4. Dashboards – Real-Time Visual Monitoring

CloudWatch Dashboards give you a **custom visual view** of multiple metrics.

### 🌐 4.1 Features

- Cross-account and cross-region views
- Add charts for metrics, alarms, and logs
- Share internally or publicly

📌 Great for **NOC screens** or **team reporting**

---

## 🧠 5. Anomaly Detection – Let ML Do the Watching

CloudWatch **Anomaly Detection** uses machine learning to detect **unusual spikes** or **drops** in metrics.

### ✅ Why Use It?

- Auto-detect outliers (no need to set thresholds)
- Works great with **request rate**, **latency**, **errors**
- Can **trigger alarms** when anomalies are detected

---

## 📌 Conclusion – Monitor Proactively, React Instantly

Amazon CloudWatch and related tools help you:

✅ Track metrics and trends  
✅ Capture logs for visibility  
✅ Trigger alarms automatically  
✅ Visualize everything in dashboards  
✅ Detect issues _before_ your users do
