# ðŸ”„ **AWS Lambda Function Versions & Aliases**

> AWS Lambda **versions and aliases** help you **manage, deploy, and route traffic** between different versions of your Lambda function. They allow you to implement **safe updates, rollbacks, and traffic shifting** without modifying the functionâ€™s ARN.

---

<div style="text-align: center;">
    <img src="images/aws-lambda-function-versions-and-aliases.png" alt="aws-lambda-function-versions-and-aliases" style="border-radius: 10px; width: 90%;" />
</div>

---

## **ðŸ“Œ What are Lambda Function Versions?**

> Each time you deploy a Lambda function, it is updated as **\$LATEST**, which means it is the most recent version.  
> However, you can **publish specific versions** to create **immutable snapshots** of your function.

---

<div style="text-align: center;">
    <img src="images/lambda-function-versions.png" alt="aws-lambda-function-versions" style="border-radius: 10px; width: 40%;" />
</div>

---

<div style="text-align: center;">
    <img src="images/aws-lambda-function-versions.png" alt="aws-lambda-function-versions" style="border-radius: 10px; width: 90%;" />
</div>

---

### **ðŸ”¹ Key Features of Versions:**

- **ðŸš« Immutable** â€“ Once published, code **cannot be changed**.
- **ðŸ·ï¸ Labeled with numbers** (e.g., `Version 1`, `Version 2`, etc.).
- **âš™ï¸ References a specific function code & configuration**.
- **ðŸ†• \$LATEST always points to the most recent, unpublished version.**

ðŸ“Œ **Example:**

```sh
aws lambda publish-version --function-name myFunction
```

> ðŸ’¡ **Creates a new version (e.g., Version 1).**

---

## **ðŸ“Œ What are Lambda Aliases?**

> A **Lambda alias** is like a **nickname** that points to a specific function version. Instead of updating references to different versions, you can **update the alias to point to a new version**.

---

<div style="text-align: center;">
    <img src="images/lambda-aliases.png" alt="aws-lambda-aliases" style="border-radius: 10px; width: 40%;" />
</div>

---

<div style="text-align: center;">
    <img src="images/aws-lambda-aliases.png" alt="aws-lambda-aliases" style="border-radius: 10px; width: 90%;" />
</div>

---

### **ðŸ”¹ Key Features of Aliases:**

- **âœï¸ Aliases are mutable** â€“ You can update them anytime.
- **ðŸ—ºï¸ Each alias maps to a specific Lambda version.**
- **âœŒï¸ Can split traffic between two versions with canary deployment (e.g., `90% v1`, `10% v2`).**
- **ðŸ§» Helps in rolling out new features safely**.

ðŸ“Œ **Example:**

```sh
aws lambda create-alias --function-name myFunction \
  --name production --function-version 1
```

> ðŸ’¡ **Creates an alias called `production` that points to `Version 1`.**

---

> ðŸ’¡ _Aliases have their own ARNs_
> ðŸ’¡ _Aliases cannot references other aliases_

---

## **ðŸ¤” Why Use Versions & Aliases?**

| **Feature**          | **Versions**                           | **Aliases**                                  |
| -------------------- | -------------------------------------- | -------------------------------------------- |
| **Mutability**       | âŒ Cannot be changed                   | âœ… Can be updated                            |
| **References**       | Refers to a specific code version      | Points to a version, can change              |
| **Traffic Routing**  | No built-in traffic shifting           | âœ… Supports weighted traffic shifting        |
| **Rollback Support** | Requires calling old versions manually | âœ… Update alias to point to previous version |
| **Example Use Case** | Archiving old versions for rollback    | Gradual deployment in production             |

---

## **ðŸ“Œ Example: Deploying Lambda with Versions & Aliases**

### **ðŸ”¹ Step 1: Deploy a New Function (Latest Version)**

```sh
aws lambda update-function-code --function-name myFunction --zip-file fileb://function.zip
```

> ðŸ’¡ **Updates the function (`$LATEST` version).**

---

### **ðŸ”¹ Step 2: Publish a New Version**

```sh
aws lambda publish-version --function-name myFunction
```

> ðŸ’¡ **Creates an immutable version (e.g., Version 1).**

---

### **ðŸ”¹ Step 3: Create an Alias for Production**

```sh
aws lambda create-alias --function-name myFunction \
  --name production --function-version 1
```

> ðŸ’¡ **Alias `production` now points to Version 1.**

---

### **ðŸ”¹ Step 4: Deploy a New Version & Update Alias**

- **1ï¸âƒ£ Deploy new function code (`$LATEST` updated).**
- **2ï¸âƒ£ Publish it as a new version (`Version 2`).**
- **3ï¸âƒ£ Update alias to point to the new version.**

```sh
aws lambda update-alias --function-name myFunction \
  --name production --function-version 2
```

> ðŸ’¡ **Now, `production` alias points to Version 2.**
> ðŸ’¡ **No need to change client references â€“ just update the alias!**

---

## âš–ï¸ **5ï¸âƒ£ Traffic Shifting Between Versions**

Aliases allow **gradual deployment** by **splitting traffic** between two versions.

ðŸ“Œ **Example: Route 90% traffic to `Version 1`, 10% to `Version 2`.**

```sh
aws lambda update-alias --function-name myFunction \
  --name production --function-version 1 \
  --routing-config '{"AdditionalVersionWeights": {"2": 0.1}}'
```

> ðŸ’¡ **Helps test new versions without affecting all users.**

---

## **ðŸ“Œ Summary: AWS Lambda Versions & Aliases**

ðŸ”¹ **Versions** allow you to create **immutable snapshots** of your function.  
ðŸ”¹ **Aliases** provide a **stable reference** that can point to different versions.  
ðŸ”¹ **Traffic shifting** helps in safe deployments and rollback strategies.  
ðŸ”¹ **Best practice**: Use **aliases (`production`, `staging`, etc.)** instead of pointing to versions directly.
