# ğŸš€ **Amazon EC2 Instance Lifecycle â€“ Explained Visually & Simply**

> _Mastering the EC2 instance lifecycle helps you optimize resource usage, control billing, and better manage your cloud environment._

---

<div style="text-align: center;">
  <img src="images/instance-lifecycle.png" alt="EC2 Instance Lifecycle" style="border-radius: 10px;"/>
</div>

---

## ğŸ”„ **1. Pending (Launching)**

ğŸŸ¡ **State**: `pending`  
When you launch a new EC2 instance, AWS begins provisioning the hardware, network, and storage.

- â³ **Instance not ready yet**
- ğŸ’¸ **Billing**: _Not billed during this stage_

---

## ğŸŸ¢ **2. Running**

ğŸŸ¢ **State**: `running`  
The instance is now up and fully operational. You can SSH (Linux) or RDP (Windows) into it.

- âœ… Ready to process workloads
- ğŸ’¸ **Billing**: _You are billed for compute usage_

---

## ğŸ” **3. Rebooting**

ğŸ” **State**: `running` (still)  
The instance restarts at the OS level, but **without stopping or terminating** it.

- ğŸ”§ Used for applying patches or soft resets
- ğŸ’¸ **Billing**: _Continues, same as running state_

---

## ğŸŸ¡ **4. Stopping â†’ Stopped**

ğŸŸ¡ **State**: `stopping` â†’ ğŸ”´ `stopped`  
Stopping shuts down the instance safely, but **retains configuration and attached EBS volumes**.

- âœ… You can restart it later
- ğŸ”„ Instance store data (if any) is lost
- ğŸ’¸ **Billing**:
  - âŒ _No compute billing_
  - âœ… _EBS storage billing continues_

---

## ğŸ˜´ **5. Hibernate**

### ğŸ§Š **What is EC2 Hibernate?**

EC2 Hibernate allows you to **pause and resume your instance with its in-memory state (RAM) preserved**. When an instance is hibernated:

- ğŸ§  Application memory, open files, and OS state are saved
- ğŸ’¾ The RAM contents are written to the **root EBS volume**
- ğŸš€ Upon restart, the instance **resumes faster** without full OS reboot
- ğŸ”’ The root volume **must be encrypted** to store RAM snapshot

---

<div style="text-align: center;">
    <img src="images/hibernate.png" alt="hibernate" style="border-radius: 10px; width: 40%;">
</div>

---

### ğŸ› ï¸ **How It Works**

- `stopping` â†’ `stopped` (but with memory saved to EBS)
- On resume: RAM is reloaded, apps pick up where they left off
- Behind the scenes: RAM is stored in a file on the **encrypted root EBS volume**

### ğŸ’¡ **Use Cases**

- Long-running processing jobs
- Applications with slow startup times
- Services that depend on memory state

### âœ… **Requirements**

| Category                    | Requirement                                                                  |
| --------------------------- | ---------------------------------------------------------------------------- |
| ğŸ“¦ **Instance Families**    | C3, C4, C5, I3, M3, M4, R3, R4, T2, T3, etc.                                 |
| ğŸ§  **RAM Size**             | Must be **less than 150 GB**                                                 |
| ğŸ§± **Instance Type**        | Not supported on **bare metal instances**                                    |
| ğŸ§¬ **AMI Support**          | Amazon Linux 2, Linux AMI, Ubuntu, RHEL, CentOS, Windows                     |
| ğŸ’½ **Root Volume**          | Must be **EBS-based, encrypted, not instance store**, and sufficiently large |
| ğŸ•’ **Hibernation Duration** | Max duration: **60 days**                                                    |

### ğŸ”‘ **Enabling Hibernate**

- Must be **enabled at instance launch**
- Set **Stop behavior = Hibernate**

### ğŸ’¸ **Billing**

- âŒ **No compute charges** during hibernation
- âœ… **EBS billing** applies (storage for memory snapshot + root volume)

---

## ğŸ”´ **6. Stopped**

ğŸ”´ **State**: `stopped`  
The instance is shut down completely but **still exists in your account** and is restartable.

- ğŸ§© EBS-backed root volumes are retained
- ğŸ’¥ Instance store volumes are erased
- ğŸ’¸ **Billing**:
  - âŒ _No compute cost_
  - âœ… _EBS cost applies_

---

## âŒ **7. Terminated**

âŒ **State**: `terminated`  
The instance is **permanently deleted**. This action cannot be undone.

- ğŸª“ You lose access completely
- ğŸ§¹ Instance store & root volumes are wiped
- ğŸ’¸ **Billing**:
  - âŒ _No further billing for the instance_
  - âš ï¸ _EBS volumes **may persist** and incur charges if not manually deleted_

---

## ğŸ” **Lifecycle Flow Summary**

- 1ï¸âƒ£ **Launch (Pending)** â†’ EC2 instance starts its provisioning process.
- 2ï¸âƒ£ **Running** â†’ Instance is ready for use.
- 3ï¸âƒ£ **Reboot** â†’ Restarts the instance without terminating it.
- 4ï¸âƒ£ **Stop (Stopping â†’ Stopped)** â†’ Temporarily halts the instance (but does not delete it).
- 5ï¸âƒ£ **Hibernate** â†’ Suspends instance memory to disk before stopping.
- 6ï¸âƒ£ **Terminate (Terminated)** â†’ The instance is permanently deleted and no longer billed.

---

## ğŸ’¸ **Billing Cheat Sheet**

| **State**      | **Compute Charges** | **Storage Charges (EBS)**    |
| -------------- | ------------------- | ---------------------------- |
| **Pending**    | âŒ No               | âŒ No                        |
| **Running**    | âœ… Yes              | âœ… Yes                       |
| **Rebooting**  | âœ… Yes              | âœ… Yes                       |
| **Stopped**    | âŒ No               | âœ… Yes                       |
| **Hibernate**  | âŒ No               | âœ… Yes (includes memory)     |
| **Terminated** | âŒ No               | âš ï¸ _Only if EBS not deleted_ |

---

## âš ï¸ **Important Notes**

- ğŸ”’ **Hibernation is supported only for EBS-backed instances**
- ğŸ§¹ **Instance Store**: Temporary storage is **lost** when the instance stops or is terminated
- ğŸ” **Stopped vs. Terminated**:
  - _Stopped_ = paused & recoverable
  - _Terminated_ = deleted & gone forever
