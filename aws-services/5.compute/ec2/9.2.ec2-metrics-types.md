# ðŸ“Š **Amazon EC2 CloudWatch Metrics**

> _Monitor the performance, health, and availability of your EC2 instances using native and custom CloudWatch metrics._

---

## ðŸ§  What is CloudWatch for EC2?

**Amazon CloudWatch** is AWSâ€™s native **monitoring and observability** tool. For EC2, it tracks:

- ðŸ“ˆ **Performance metrics** (CPU, Network, Disk)
- ðŸ’¡ **Health status** (status checks)
- ðŸ§¾ **Custom app/system-level data**
- ðŸ”” **Alarms** to automate responses or send alerts

---

## ðŸ¤– AWS-Provided Metrics (Pushed Automatically)

### ðŸ”¸ Monitoring Tiers

| Monitoring Type         | Granularity | Pricing                               |
| ----------------------- | ----------- | ------------------------------------- |
| **Basic Monitoring**    | 5-minute    | âœ… Free                               |
| **Detailed Monitoring** | 1-minute    | ðŸ’° Paid (\~\$2.10 per instance/month) |

> ðŸ’¡ These metrics are collected and pushed **automatically by AWS** â€” no agent required.

### âœ… EC2 Included Metrics (AWS-Provided)

These metrics come built-in with every EC2 instance:

#### ðŸ”§ **CPU Metrics**

- `CPUUtilization`: % of total vCPU usage
- `CPUCreditUsage`: Credits used by burstable instances (T2/T3)
- `CPUCreditBalance`: Remaining credits for burst performance

> ðŸ“Œ **Used primarily with T2/T3 instances** to monitor and manage burst behavior.

#### ðŸŒ **Network Metrics**

- `NetworkIn`: Total incoming traffic in bytes
- `NetworkOut`: Total outgoing traffic in bytes

ðŸ“Š Helps identify:

- Data bottlenecks
- Public traffic trends
- Potential DDoS anomalies

#### ðŸ› ï¸ **Status Check Metrics**

| Metric Type         | What It Checks                             |
| ------------------- | ------------------------------------------ |
| **Instance Status** | OS-level issues (e.g., boot, full disk)    |
| **System Status**   | Underlying AWS hardware (e.g., power, RAM) |
| **EBS Status**      | Attached EBS volume health                 |

> ðŸ“ Found in **EC2 Console â†’ Instance â†’ Status Checks tab**

---

#### ðŸ’½ **Disk Metrics** (Instance Store Only)

- `DiskReadOps`, `DiskWriteOps`: Number of disk I/O operations
- `DiskReadBytes`, `DiskWriteBytes`: Volume of data transferred

> ðŸš« **EBS volumes are not included** in these metrics â€” EBS has its own CloudWatch metrics.

---

#### âŒ **Whatâ€™s Missing?**

- **RAM usage is NOT included by default**
- You must **push memory metrics manually** using a CloudWatch Agent or API

---

## âœï¸ Custom CloudWatch Metrics (User-Pushed)

> Add metrics beyond AWS defaults â€” for RAM, disk space, apps, services, etc.

---

### â±ï¸ Resolutions

| Resolution Type     | Granularity       | Ideal For                              |
| ------------------- | ----------------- | -------------------------------------- |
| **Basic**           | 1-minute          | General metric tracking                |
| **High Resolution** | 1-second to 1-min | Real-time alerting, latency monitoring |

---

### ðŸŽ¯ Common Use Cases

- ðŸ§  Memory usage
- ðŸ’¾ Disk usage (EBS)
- ðŸŒ HTTP response time, queue depth
- ðŸ”¥ Custom app KPIs (e.g., error rate, DB query time)

---

### ðŸ›¡ï¸ Required IAM Permission

To push custom metrics, your EC2 instance role must allow:

```json
{
  "Effect": "Allow",
  "Action": "cloudwatch:PutMetricData",
  "Resource": "*"
}
```

---

### ðŸ› ï¸ CloudWatch Agent (for RAM / Disk)

```bash
# Install agent (Amazon Linux)
sudo yum install amazon-cloudwatch-agent

# Configure metrics (wizard or JSON)
sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-config-wizard

# Start the agent
sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl \
  -a fetch-config -m ec2 -c file:/opt/aws/config.json -s
```

---

## ðŸ”” Using Metrics for Alarms and Automation

With CloudWatch, you can **automate responses** to metric conditions:

| Feature               | Description                                         |
| --------------------- | --------------------------------------------------- |
| ðŸ”” **Alarm**          | Trigger based on metric thresholds (e.g. CPU > 80%) |
| ðŸ”„ **Auto Actions**   | Reboot, recover, or scale EC2 instances             |
| ðŸ“¬ **Notifications**  | Send alerts via SNS (email, SMS, webhook, etc.)     |
| ðŸ¤– **Trigger Lambda** | Run automation when alarms fire                     |

---

## ðŸ“š CloudWatch & SOA-C03 Exam Tips

The AWS Solutions Architect Associate exam will test your ability to:

âœ… Understand the difference between **Basic vs Detailed Monitoring**
âœ… Know that **RAM is not included by default**
âœ… Identify when to use **custom metrics**
âœ… Set alarms for **auto-recovery or notifications**

ðŸ§ª Expect scenario questions like:

> _"An app on a t2.micro instance is slowing down during peak hours. What's the likely cause?"_
> âœ… **Answer:** CPU credit exhaustion (`CPUCreditBalance` low)

---

## ðŸ§¾ Summary Table

| Metric Category       | Metrics Included                           | Notes                                 |
| --------------------- | ------------------------------------------ | ------------------------------------- |
| CPU                   | `CPUUtilization`, `CPUCreditUsage/Balance` | Only burstable instances have credits |
| Network               | `NetworkIn`, `NetworkOut`                  | Tracks total bytes                    |
| Status Checks         | `StatusCheckFailed_System/Instance`        | Hardware and OS health                |
| Disk (instance store) | `DiskReadOps`, `DiskWriteBytes`            | Only applies to ephemeral volumes     |

> âŒ RAM, disk free space is Missing => Use **custom metrics** to include
