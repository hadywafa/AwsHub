# ğŸ’¥ **EC2 Spot Instances** â€“ _Maximum Savings, Minimal Waste_

**Amazon EC2 Spot Instances** let you run workloads at up to **90% discount** compared to On-Demand pricing by using **spare EC2 capacity**.

> ğŸ§  Think: _â€œleftover EC2 powerâ€ for a fraction of the costâ€”if you can handle the interruptions._

---

## ğŸŒŸ **Core Highlights**

| Feature                    | Description                                                         |
| -------------------------- | ------------------------------------------------------------------- |
| ğŸ’¸ **Cost**                | Up to 90% cheaper than On-Demand                                    |
| âš ï¸ **Interruptible**       | Can be **terminated by AWS** with a **2-min warning**               |
| âŒ **No Availability SLA** | Capacity might be **unavailable** when needed                       |
| ğŸ”„ **Flexible**            | Supports diverse **workload patterns** and **fleet configurations** |

---

## ğŸ¯ **Best Use Cases**

ğŸ§ª Non-critical and fault-tolerant workloads such as:

- ğŸ› ï¸ **Batch processing**
- ğŸ“Š **Big data analysis**
- ğŸ§¬ **Scientific simulations**
- ğŸ“ **Background tasks**
- ğŸ”„ **Containerized workers**
- ğŸ¨ **Rendering jobs**

---

## **ğŸ”„ Spot Instance Request Types**

You can choose from different request types when launching Spot Instances, which will determine how the instance behaves when the Spot price changes or capacity is no longer available.

### ğŸ•’ 1. **One-Time Request**

- Fills your request **once** and terminates or stops if interrupted.
- Best for **ad hoc** tasks or testing environments.

### ğŸ” 2. **Persistent Request**

- AWS **automatically reattempts** if interrupted or capacity becomes available.
- Ideal for **resilient, long-running jobs**.

---

<div style="display: flex; justify-content: center; align-items: center;">

| Feature           | One-Time Request            | Persistent Request              |
| ----------------- | --------------------------- | ------------------------------- |
| **Duration**      | Until fulfilled or canceled | Remains until manually canceled |
| **Auto-Relaunch** | âŒ No                       | âœ… Yes                          |
| **Best For**      | Ad-hoc jobs                 | Long-lived, resilient workloads |

</div>

---

<div style="text-align: center;">
    <img src="images/ec2-fleet-vs-spot-fleet.png" style="border-radius: 10px;" alt="EC2 Fleet vs Spot Fleet">
</div>

---

## **ğŸš¢ Fleet Management**

In the context of **Amazon EC2**, a **fleet** refers to a **group of EC2 instances**â€”not just one instanceâ€”that are launched and managed together to meet a specified **target capacity** using **a mix of instance types**, **purchase options**, and **availability zones**.

Think of it like this:

> ğŸ”§ Instead of managing one EC2 instance at a time, you define a _plan_ (the fleet), and AWS intelligently provisions the best combination of instances to meet your needs.

### **ğŸš€ EC2 Fleet**

- **Can Launch Multiple Instance Types**: EC2 Fleet can launch instances across multiple Availability Zones in one region.
- **Define On-Demand and Spot Capacity**: You can separately define how much On-Demand or Spot capacity you need.
- **Specify Maximum Price**: You can define the maximum amount you are willing to pay for the fleet.
- **API/CLI-Based**: EC2 Fleet can only be launched via CLI, SDKs, and APIs.

### **ğŸš¢ Spot Fleet**

A **Spot Fleet** is a collection of Spot Instances and optionally On-Demand Instances. Itâ€™s designed to `maintain` the required capacity for your application based on a Spot Instance request.

- **Maintain Target Capacity**: Spot Fleet can replace terminated Spot Instances to `maintain` the required capacity.
- **Mixed Instances**: The Spot Fleet can launch a combination of Spot and On-Demand instances.
- **Spot Capacity Pools**: Spot Fleet selects the best Spot capacity pools to meet the request specifications.

## âš”ï¸ **Spot Fleet vs. EC2 Fleet**

| Feature                                       | âš“ Spot Fleet | ğŸš€ EC2 Fleet         |
| --------------------------------------------- | ------------- | -------------------- |
| ğŸ“… Launch Date                                | 2015          | 2018                 |
| ğŸ”§ Console UI                                 | âœ… Yes        | âŒ No (API/CLI only) |
| ğŸ’¼ On-Demand + Spot Combo                     | âœ… Yes        | âœ… Yes               |
| ğŸ” Supports Reserved Instance pricing         | âœ… Yes        | âœ… Yes               |
| ğŸ§  Can maintain target capacity automatically | âœ… Yes        | âœ… Yes               |
| ğŸ·ï¸ Can specify Capacity Reservation ID        | âŒ No         | âœ… Yes               |
| ğŸ’° Price Ceiling                              | âœ… Yes        | âœ… Yes               |

---

## ğŸ›ï¸ **Spot Fleet Allocation Strategies**

| Strategy                  | Description                                                    | Best For                          |
| ------------------------- | -------------------------------------------------------------- | --------------------------------- |
| ğŸ”µ **Capacity Optimized** | Prioritizes instance pools with available capacity             | Long-running, resilient workloads |
| ğŸŸ¢ **Lowest Price**       | Chooses cheapest Spot pools available                          | Short jobs, cost-focused          |
| ğŸŸ¡ **Diversified**        | Spreads across multiple instance types to avoid pool depletion | Balanced risk & cost trade-offs   |

---

## ğŸ“‹ **How to Request Spot Instances**

You have two options:

| Method                    | Scope                                  |
| ------------------------- | -------------------------------------- |
| **Spot Instance Request** | Single AZ / Subnet                     |
| **Spot Fleet Request**    | Multi-AZ / Multi-type with flexibility |

---

<div style="text-align: center;">
    <img src="images/request-spot-instance.png" alt="Requesting Spot Instances" style="border-radius: 10px;" />
</div>

---

## ğŸš¨ **Spot Instance Interruption Mechanics**

> AWS can **reclaim Spot instances** anytimeâ€”stay prepared!

### ğŸ”” Interruption Signals

- 2-minute notice via:

  - âœ… EC2 metadata endpoint
  - âœ… Amazon EventBridge (rebalance notifications)

### ğŸ’¥ Interruption Responses

- âŒ **Terminate** (default)
- â¸ï¸ **Stop** (EBS-backed only)
- ğŸ’¤ **Hibernate** (EBS + supported OS only)

---

## ğŸ” **Handling Spot Rebalancing**

Use **Amazon EventBridge** to monitor `rebalance-recommendation` events.
Proactively **migrate tasks** to healthy capacity pools before your Spot instance gets interrupted.

---

## âœ… **Final Summary: Why (and When) to Use Spot?**

| âœ… Pros                             | âš ï¸ Cons                                 |
| ----------------------------------- | --------------------------------------- |
| ğŸ’¸ Massive savings (up to 90%)      | â›” Instances can be interrupted anytime |
| ğŸš€ Mix with EC2/Auto Scaling/Fleets | âŒ Not ideal for mission-critical apps  |
| â™»ï¸ Great for disposable workloads   | ğŸ§  Requires graceful fault handling     |

---

## ğŸ§  Smart Tip

> Pair Spot with **Auto Scaling Groups**, **Fargate Spot**, or **Spot Fleet Diversification** for **reliable + cost-effective scale**.
