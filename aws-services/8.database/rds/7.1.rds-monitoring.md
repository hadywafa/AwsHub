# ğŸ©º Amazon RDS Monitoring & Insights

> _Stay informed, alert, and ahead â€” monitor your RDS instances like a pro._

---

## ğŸ“£ RDS Events & Subscriptions

Amazon RDS generates **events** for various operations and lifecycle changes.

---

<div style="text-align: center;">
    <img src="images/rds-events.png" alt="rds-events" style="border-radius: 10px; width: 60%;">
</div>

---

### ğŸ” Key Use Cases

- Backups completed or failed
- DB instance failover
- Parameter group changes
- Security group updates
- Snapshot creation/deletion

---

### ğŸ”” Event Subscriptions

You can subscribe to RDS events using **SNS** or **EventBridge**

<div style="text-align: center;">
    <img src="images/rds-event-subscriptions.png" alt="RDS Event Subscriptions" style="border-radius: 10px; width: 80%;">
</div>

---

### ğŸ“¬ Delivery Options

| Component      | Purpose                                          |
| -------------- | ------------------------------------------------ |
| ğŸ”” SNS         | Sends notifications (email/SMS/HTTP)             |
| ğŸ”„ EventBridge | Triggers workflows like Lambda or Step Functions |

### âœ… Example

> When a backup completes, RDS sends an event that can:
>
> - Notify via SNS
> - Trigger a remediation flow via EventBridge

ğŸ“Œ _Useful for automation, compliance reporting, and incident alerting._

---

## ğŸ“‘ RDS Database Log Files

RDS can capture key logs:

| Log Type      | Purpose                          |
| ------------- | -------------------------------- |
| ğŸ§¾ General    | Connect/disconnect, query info   |
| ğŸ” Audit      | Security audits, access tracking |
| âŒ Error      | Engine-level errors, crashes     |
| ğŸ¢ Slow Query | Identify long-running queries    |

You can export these to **CloudWatch Logs** for:

- ğŸš¨ Alarms (via CW Alarms + SNS)
- ğŸ“Š Search and filtering
- ğŸ” Troubleshooting errors

---

## ğŸ“Š RDS Metrics â€“ CloudWatch

RDS provides **CloudWatch metrics from the hypervisor** (no agent needed):

| Metric Name              | Description                             |
| ------------------------ | --------------------------------------- |
| `DatabaseConnections`    | Number of DB connections                |
| `SwapUsage`              | Swap space in use                       |
| `ReadIOPS` / `WriteIOPS` | Read/write input/output per second      |
| `FreeStorageSpace`       | Remaining disk space                    |
| `DiskQueueDepth`         | # of operations waiting for disk access |

---

### ğŸ” Enhanced Monitoring

Enable **Enhanced Monitoring** for granular, OS-level metrics via agent:

| ğŸ”§ System-Level Metrics     | Examples                      |
| --------------------------- | ----------------------------- |
| ğŸ§  CPU usage per process    | Troubleshoot high-CPU threads |
| ğŸ§® Memory & swap usage      | Find memory leaks             |
| ğŸ’¾ Disk I/O per file system | Detect I/O bottlenecks        |
| ğŸ“‚ File system usage        | Monitor mount points          |

---

## ğŸ§  RDS Performance Insights

Performance Insights helps you **visualize load** & pinpoint DB slowdowns.

### ğŸ§ª Analyze by

| Filter Type | What You Learn                             |
| ----------- | ------------------------------------------ |
| ğŸ•°ï¸ Waits    | Resource bottlenecks (CPU, I/O, locks)     |
| ğŸ“„ SQL      | High-load queries                          |
| ğŸ§‘ Users    | Which user causes the most load            |
| ğŸ’» Hosts    | From where the heaviest queries are coming |

### ğŸ•°ï¸ **Find the Bottlenecks â€“ Filter by Waits**

Want to know **why your DB is slow**?  
The **"Waits" view** shows which resource is holding your queries back â€” like:

- â³ CPU saturation
- ğŸ’¾ Disk I/O overload
- ğŸ” Lock contention (e.g., row/table locks)

<div align="center">

_"You'll instantly spot spikes and trends by wait type."_
<img src="images/rds-insights-filter-by-wait.png" alt="DB Load by Waits" style="border-radius: 10px; width: 80%;">

</div>

---

### ğŸ“„ **Spot the Problem Queries â€“ Filter by SQL**

See **which SQL statements** are dragging down performance.
No guessworkâ€”Performance Insights shows:

- ğŸ”¢ Execution counts
- ğŸ•’ Query durations
- ğŸ” Most expensive SQL by load

<div align="center">

_"You can zoom in on time ranges and see exactly what your DB was doing."_
<img src="images/rds-insights-filter-by-sql.png" alt="DB Load by SQL Queries" style="border-radius: 10px; width: 80%;">

</div>

---

### ğŸ§‘â€ğŸ’» **Track Down Heavy Users â€“ Filter by User**

Whoâ€™s using the most resources?

The **Users filter** breaks down the load per database user, helping you:

- ğŸ‘¤ Identify misbehaving apps or users
- ğŸ›¡ï¸ Enforce user-specific resource policies
- ğŸ” Troubleshoot rogue activity fast

<div align="center">
  <img src="images/rds-insights-filter-by-user.png" alt="DB Load by Users" style="border-radius: 10px; width: 80%;">
</div>

---

### ğŸ’» **Trace Load Origins â€“ Filter by Host**

Where is the traffic coming from?

With the **Hosts view**, you can:

- ğŸŒ Pinpoint client servers flooding your DB
- ğŸ“Š Correlate load spikes to app deployments
- ğŸ› ï¸ Optimize resource-heavy applications

---

### ğŸ’¡ Key Metric

- `DBLoad` = # of active sessions running on the DB engine

ğŸ“¸ Example:

```bash
Top Query:
SELECT * FROM orders WHERE status = 'PENDING';

Wait Time: io/file/sql/handler (Disk I/O bottleneck)
```

---

## ğŸ“ Best Practices

- âœ… **Enable Performance Insights** (especially for Aurora, RDS MySQL/Postgres)
- âœ… Use **CloudWatch Dashboards** to monitor multiple instances in one place
- âœ… Set **alarms on FreeStorageSpace, ReadLatency, SwapUsage**, etc.
- âœ… **Export logs to CW Logs** + create **metric filters** for known error strings
- âœ… Use **EventBridge** to auto-respond to certain RDS events
